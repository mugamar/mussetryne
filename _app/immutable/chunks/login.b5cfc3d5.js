import{w as r}from"./index.81df05ee.js";const l="logged_in",a="logged_in_user",c="mussetoken",_=r(""),i=r(!1),g=r(""),f=async e=>(i.set(e.currently_logged_in),g.set(e.currently_logged_in_user),_.set(e.token),typeof window<"u"&&(localStorage.setItem(l,e.currently_logged_in),localStorage.setItem(a,e.currently_logged_in_user),localStorage.setItem(c,e.token)),e.currently_logged_in),m=()=>{i.set(!1),g.set(""),_.set(""),typeof window<"u"&&(localStorage.setItem(l,"false"),localStorage.setItem(a,""),localStorage.setItem(c,""))};async function u(e){if(e.status==200){const t=await e.json(),n=t.access_token,s=t.token_type,o=t.user_email;if(n&&n!==""&&s==="bearer")return{token:n,currently_logged_in:!0,currently_logged_in_user:o}}else if(e.status==401)return alert("Feil brukernavn eller passord."),{token:"",currently_logged_in:!1,currently_logged_in_user:""}}async function E(e,t,n){const s=JSON.stringify({email:t,password:n});try{const o=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"localhost:42069"},body:s,mode:"cors",credentials:"include"});return await u(o)}catch(o){return alert("En feil oppstod. Vennligst prÃ¸v igjen."),console.log(o),!1}}export{a as L,c as M,l as a,i as b,g as c,E as d,f as e,m as l,_ as m};
